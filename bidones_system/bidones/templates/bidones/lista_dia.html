{% extends "bidones/base_template.html" %}
{% load static %}
{% block content %}

<div class="relative bg-white overflow-hidden hero-section">
    <div class="max-w-7xl mx-auto">
        <div class="relative z-10 pb-8 bg-white sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32">
            <main class="mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28">
                <div class="sm:text-center lg:text-left">
                    <h1 class="text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl">
                        <span class="block xl:inline"> Panel de CRUD (Clientes y Pedidos)</span>
                    </h1>
                    <p class="mt-3 text-base text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0">
                        En este panel, puedes agregar, buscar, editar y eliminar clientes y sus pedidos.
                    </p>
                    <div class="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start">
                        <div class="rounded-md shadow">
                            <button type="button" class="btn btn-crud btn-primary" data-bs-toggle="modal" data-bs-target="#add__form">
                                A√±adir Cliente üßç‚Äç‚ôÇÔ∏è
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div class="lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2 contenedor-logo-manantiales z-index">
        <div class="w-full h-full flex justify-center items-center">
        <img 
            class="h-56 w-56 sm:h-72 sm:w-72 md:h-96 md:w-96 lg:h-[80%] lg:w-[80%] object-contain rounded-full logo-manantiales" 
            src="{% static 'bidones/assets/logo-bidones.png' %}" 
            alt="Logo Manantiales"
        >
        </div>
    </div>
</div>

<div class="container">
    <!-- Modal para a√±adir cliente -->
    <div class="modal fade animated-text" id="add__form" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel"> A√±adir Cliente </h1>
                </div>
                <div class="modal-body">
                    <form action="/clientes/new/" method="POST">
                        {% csrf_token %}
                        <ul class="list-group">
                            <div class="list-group-item">
                                <label for="cliente" class="col-form-label"> Cliente: </label>
                                <input type="text" class="form-control" placeholder="Nombre del cliente" name="cliente" required>
                            </div>
                            <div class="list-group-item">
                                <label for="20L" class="col-form-label"> Cantidad de bidones 20L: </label>
                                <input type="number" class="form-control" placeholder="Cantidad de bidones de 20L" name="20L" required>
                            </div>
                            <div class="list-group-item">
                                <label for="15L" class="col-form-label"> Cantidad de bidones 15L: </label>
                                <input type="number" class="form-control" placeholder="Cantidad de bidones de 15L" name="15L" required>
                            </div>
                            <div class="list-group-item">
                                <label for="precio" class="col-form-label"> Precio Total: </label>
                                <input type="number" class="form-control" placeholder="Precio total" name="precio" step="0.01" required>
                            </div>
                            <div class="list-group-item">
                                <label for="paga" class="col-form-label"> Pago realizado: </label>
                                <input type="number" class="form-control" placeholder="Pago realizado" name="paga" step="0.01" required>
                            </div>
                            <div class="list-group-item">
                                <label for="debe" class="col-form-label"> Total a pagar: </label>
                                <input type="number" class="form-control" placeholder="Saldo pendiente" name="debe" step="0.01" required>
                            </div>
                            <div class="list-group-item">
                                <label for="fecha" class="col-form-label"> Fecha: </label>
                                <input type="date" class="form-control" name="fecha" required>
                            </div>
                            <button type="submit" class="btn btn-success mt-3"> A√±adir Cliente </button>
                        </ul>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Campo de b√∫squeda -->
    <form action="/clientes/search/" method="GET" class="mt-3 mb-4">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Buscar cliente..." name="query" required>
            <button type="submit" class="btn btn-primary">Buscar</button>
        </div>
    </form>

    <!-- Tabla de clientes -->
    <table class="table table-hover table-striped align-middle text-center">
        <thead>
            <tr class="table-dark">
                <th scope="col"> # </th>
                <th scope="col"> Cliente </th>
                <th scope="col"> 20L </th>
                <th scope="col"> 15L </th>
                <th scope="col"> Precio </th>
                <th scope="col"> Paga </th>
                <th scope="col"> Debe </th>
                <th scope="col"> Fecha </th>
                <th scope="col"> Acciones </th>
            </tr>
        </thead>
        <tbody>
            {% for cliente in clientes %}
            <tr>
                <th scope="row">{{ cliente.id }}</th>
                <td>{{ cliente.nombre }}</td>
                <td>{{ cliente.bidones_20L }}</td>
                <td>{{ cliente.bidones_15L }}</td>
                <td>${{ cliente.precio_total }}</td>
                <td>${{ cliente.paga }}</td>
                <td>${{ cliente.debe }}</td>
                <td>{{ cliente.fecha }}</td>
                <td>
                    <a class="btn btn-warning" href="/clientes/edit/{{ cliente.id }}">Editar</a>
                    <a class="btn btn-danger" href="/clientes/delete/{{ cliente.id }}">Eliminar</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
